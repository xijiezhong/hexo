---
title: 代码质量修炼之路 - 读《代码整洁之道》有感
date: 2018-05-29 16:46:15
tags:
---
代码和代码之间是存在差距的，即使实现的功能相同。读一份好的代码，我们可以清晰的感觉到作者的思路、想法。作为一个刚入行的菜鸟，我的代码质量总是会被mentor点名，codereview时总会收到很多comments。那如何提高自己的代码姿势水平呢，这里倾情推荐一本书《clean code》（《代码整洁之道》）。接下来，我会分享一下我从这本书中的收获以及我日常coding中的一些个人总结。

### **命名**
命名实在是代码中最基础也是最重要的一环。一份代码，从阅读上来讲，无非是一堆命名+一些固定的语法。命名的好坏直接决定了程序的可读性。那什么样的命名才算是好的命名呢？我觉得可以用严复先生的「信达雅」三字来概括。
- 信就是命名要准确的表达实际的意义、不偏离、不遗漏、也不要随意增减意思。比如：d1，d2就是很糟糕的命名，monday、tuesday就是良好的命名
- 达就是命名要通顺明白，《clean code》中也建议尽量使用能够读得出来的名称。rBd和requestBaidu相比，明显后者通顺明白
- 雅就是优雅，这是比较玄学的一部分。比如一个方法是执行一个动作，那么命令最好是一个动词词组。

### **函数**
函数在程序中的重要性无须多表。要写好一个函数要做好两件事情：概括与分段（很像语文老师常念叨的事情）。
首先，函数不能长篇大论，函数应该尽量短小，没人希望看到鸿篇巨制。短小就要求函数尽量专注于一件事，如果你发现函数内部代码代码太多，完成的功能超过两件，那么你就应该考虑把一部分代码分块抽象成另外一个函数。
其次，函数内部应该做到良好的分段，逻辑和功能上联系紧密的代码语句应该放在一起，两个代码段之间可以使用空行分隔，这样代码阅读者可以很轻松的知道代码的结构
最后，解决重复。如果一个功能在多个地方都有使用，那么我们应该写一份代码被多个地方引用，而不是在多个地方写多份代码。这样有几个好处，能够缩短代码工作量，更好的封装功能模块。同时也会对后期的维护升级带来巨大的好处，只需要维护一份代码，一处修改、处处受益。

### **注释**
《clean code》一书中对注释的看法改变了我对注释的使用。
以前在我看来，注释是一个非常好用的东西，可以帮助别人理解程序，拥有比代码好得多的表达性。有的框架标准甚至要求对每一个函数进行特定格式的注释。
但是，在《clean code》的作者看来，注释并不是『纯然的好』，甚至可以说是「必然的恶」。写注释就意味着用代码表达意图时的失败，如果代码写的足够好，表达足够清晰，那么注释完全是没有必要的。
同时，大家要记住，在程序中，唯有代码是真实可靠的，注释是可能会与真实代码不一致的，是可能会撒谎的。有的人可能会说，怎么会，我的注释都是照着代码写的，绝对是表达的我本来的意思。但是大家忘了，代码是在变动的，你会升级、迁移、甚至完全改造你的函数，但是你可能很久都不会维护你的注释。因此，在未来的某一个时间点，你的注释和你的代码之间就出现了代沟，阅读你代码的人就会很困惑。
因此，注释是不必要的、是会给你带来维护成本的一个负担。如果有可能，尽量使用优秀的代码表达你的意思，而不是使用注释。

### **格式**
大家都很熟悉格式，写作文时每段开头空两格。统一规范总是给人赏心悦目的感觉。因此，保持统一规范的格式，良好的缩进、换行，对于代码的美观是非常重要的。

### **总结**
如果你能做到以上这些点，那么我相信你一定能够写出一份良好的代码！